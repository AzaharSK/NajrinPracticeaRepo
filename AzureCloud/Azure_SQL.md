- Ref: https://www.udemy.com/course/dp900-azure/learn/lecture/20869562#overview

<img width="1913" height="621" alt="image" src="https://github.com/user-attachments/assets/54efc6e7-8de8-42b5-ae81-d79feb6f805f" />
<img width="1913" height="621" alt="image" src="https://github.com/user-attachments/assets/14471db2-bfea-4e11-a60c-63e137e7f3c4" />
<img width="1908" height="888" alt="image" src="https://github.com/user-attachments/assets/4ddb559a-8f89-48e7-9dc7-391b71cf903d" />
<img width="1912" height="1019" alt="image" src="https://github.com/user-attachments/assets/c461acb7-3796-4c87-8025-540cfd8fd9d8" />
<img width="1916" height="712" alt="image" src="https://github.com/user-attachments/assets/68bbc687-3b79-4553-9212-e6f279d06f76" />
<img width="1890" height="830" alt="image" src="https://github.com/user-attachments/assets/9eca93cb-e242-4087-b445-1e2fd08313b1" />
<img width="1896" height="969" alt="image" src="https://github.com/user-attachments/assets/c74b22f1-7dd9-40c5-8dc8-0dae7608ba59" />
<img width="1848" height="1045" alt="image" src="https://github.com/user-attachments/assets/103f1404-510b-40df-8891-84c5a6ea2571" />
<img width="1908" height="678" alt="image" src="https://github.com/user-attachments/assets/80bb796a-9574-42e7-81af-13073bc7b6af" />
<img width="1908" height="678" alt="image" src="https://github.com/user-attachments/assets/ac1f5851-02fa-4449-8401-58ce484db8c4" />
<img width="1776" height="700" alt="image" src="https://github.com/user-attachments/assets/2e276e29-46da-48bc-9a47-b0c3cdf6eed8" />
<img width="1886" height="727" alt="image" src="https://github.com/user-attachments/assets/8d89014f-ee90-437b-91c8-2a6d0cd406c8" />
<img width="1886" height="727" alt="image" src="https://github.com/user-attachments/assets/aef15be3-5eea-41d2-a08a-cfdd92be08c8" />
<img width="1914" height="584" alt="image" src="https://github.com/user-attachments/assets/771792d3-926e-404f-a73e-0abece82a957" />
<img width="1523" height="669" alt="image" src="https://github.com/user-attachments/assets/9692093a-953a-452d-acd2-bd2e6b86c5d6" />
<img width="1750" height="824" alt="image" src="https://github.com/user-attachments/assets/85015180-bf31-45a2-b321-9964cb810666" />
<img width="1750" height="824" alt="image" src="https://github.com/user-attachments/assets/04bb1b7b-9033-4f9b-8c88-19b00ebd85c8" />
<img width="1864" height="1039" alt="image" src="https://github.com/user-attachments/assets/13a259ac-a778-44ea-a1cc-4296632c2bee" />
<img width="1909" height="692" alt="image" src="https://github.com/user-attachments/assets/6bc88b6f-0a11-4003-baf7-10bd9241d2e5" />
<img width="1885" height="1046" alt="image" src="https://github.com/user-attachments/assets/5b04a6b3-61b6-4d5f-b1a8-4b2bdffec1a2" />
<img width="1885" height="1046" alt="image" src="https://github.com/user-attachments/assets/21752c4e-3ba3-42e8-b49f-82cdfab8e71b" />
<img width="1850" height="673" alt="image" src="https://github.com/user-attachments/assets/4d80d44c-49a0-4071-9a23-f472582dd564" />

----------------------------------------
# Azure SQL database LAB

<img width="1707" height="982" alt="image" src="https://github.com/user-attachments/assets/82b0e01d-7820-4948-8457-c6d0c2489326" />
<img width="1469" height="1102" alt="image" src="https://github.com/user-attachments/assets/af9c9e29-4c4e-4c86-a881-667229c47e2f" />
<img width="1028" height="1109" alt="image" src="https://github.com/user-attachments/assets/1dcafe99-c1ce-4879-8869-803d77dcc1d1" />
<img width="1143" height="1113" alt="image" src="https://github.com/user-attachments/assets/6ce21048-a992-41c1-a15d-9df8cecd71e0" />
<img width="1364" height="1084" alt="image" src="https://github.com/user-attachments/assets/e59fa27d-332b-417a-ad45-12258e24e7b4" />
<img width="1628" height="802" alt="image" src="https://github.com/user-attachments/assets/92e41fab-f707-42f2-a84f-984110bc5bb7" />
<img width="1854" height="660" alt="image" src="https://github.com/user-attachments/assets/8e69cd85-9059-48ed-82aa-1a3f2906e3c9" />
<img width="1854" height="892" alt="image" src="https://github.com/user-attachments/assets/c6657065-5bdf-495d-ad78-db90d5f7871e" />
<img width="1826" height="1103" alt="image" src="https://github.com/user-attachments/assets/fe92f9bb-9f9b-4b42-aafb-d69052871793" />

## Azure Query Editor

<img width="1818" height="687" alt="image" src="https://github.com/user-attachments/assets/68a54ada-22e4-475e-8cd2-9610e000b1e8" />
<img width="1666" height="892" alt="image" src="https://github.com/user-attachments/assets/ded99ec4-acca-4ccd-9957-949f50f400f1" />

## Allow Firewall rule for this laptop IP to view/access to DB

<img width="1847" height="1062" alt="image" src="https://github.com/user-attachments/assets/b5d96bf9-6270-4a40-8ffd-304c2f15fb9d" />

__`Databases ‚Üí app-sqldb ‚Üí Tables ‚Üí Right click ‚Üí Select Top 1000 Rows`__
<img width="1826" height="1103" alt="image" src="https://github.com/user-attachments/assets/302393db-347c-40ba-a252-76872460f71a" />

```sql
-- Show all tables
SELECT * FROM INFORMATION_SCHEMA.TABLES;

-- Show table data
SELECT * FROM users;

-- Show table structure
EXEC sp_help 'users';

```

__`Using Command Line (sqlcmd)`__

<img width="1881" height="835" alt="image" src="https://github.com/user-attachments/assets/74e45140-322c-485d-91ad-acd1c7cd388c" />

```
sqlcmd -S app-sqldbserver.database.windows.net -U dbadmin -P yourpassword -d app-sqldb
```
<img width="1821" height="837" alt="image" src="https://github.com/user-attachments/assets/a45f9794-b8e8-4a22-aabf-b73c50b5ee76" />
<img width="1881" height="835" alt="image" src="https://github.com/user-attachments/assets/33e1fdfe-19e1-4211-bbdc-3fae0a031042" />

<img width="1906" height="525" alt="image" src="https://github.com/user-attachments/assets/f562e199-2102-485d-8bc7-56bbd84072c1" />
<img width="1906" height="525" alt="image" src="https://github.com/user-attachments/assets/0ccbea23-618b-4b3d-86c0-eae8f066c2a9" />
<img width="1906" height="525" alt="image" src="https://github.com/user-attachments/assets/d4c6c560-81ac-44c8-acdf-09e3643ca212" />
<img width="1885" height="577" alt="image" src="https://github.com/user-attachments/assets/915d013e-22d8-4212-872b-5bba328181fa" />
<img width="1885" height="836" alt="image" src="https://github.com/user-attachments/assets/38d3146a-4fe0-4d54-a6d6-9dd645407034" />

## DataBase connection string:

<img width="1841" height="1016" alt="image" src="https://github.com/user-attachments/assets/3667eba7-f0a5-489b-b91e-433e7a87549f" />
<img width="1038" height="851" alt="image" src="https://github.com/user-attachments/assets/55c2667b-8bbe-41e1-b900-46b3db579c4c" />
<img width="1851" height="542" alt="image" src="https://github.com/user-attachments/assets/404c9d12-94ae-409f-9b58-862adf66c33e" />


## Deploy 50 SQL DB same instance using template , downloads an ARM template JSON file
<img width="1816" height="883" alt="image" src="https://github.com/user-attachments/assets/2944c58d-9627-48df-a306-d00a4b262a3e" />
<img width="1611" height="684" alt="image" src="https://github.com/user-attachments/assets/6cffbd9a-459a-4a57-b116-5b364b554ada" />

<img width="1826" height="1103" alt="image" src="https://github.com/user-attachments/assets/63dee027-3d54-41e6-a0dc-b7318b55964f" />
<img width="1572" height="1102" alt="image" src="https://github.com/user-attachments/assets/9988b34d-66f6-45fb-97e0-b28f63a0fd18" />


## SQL Database security:
<img width="1747" height="993" alt="image" src="https://github.com/user-attachments/assets/bae893ba-ff30-4545-b752-bc72311b5c96" />

# SQL Database Security ‚Äì Summary Notes

## Overview
Database security consists of multiple layers that protect data from unauthorized access, attacks, misuse, and breaches. In Azure SQL Database, security is enforced through five major mechanisms:

1. Networking Security  
2. Identity (Account) Security  
3. Firewall & Threat Protection (Microsoft Defender)  
4. Encryption  
5. Logging & Auditing  

---

# 1Ô∏è‚É£ Networking Security

## Key Concepts
- Public access is **denied by default**.
- Databases should NOT be publicly accessible in production.
- Public access may be temporarily enabled for testing/demo purposes.

## Secure Access Options

### üîπ Private Access (Recommended)
- Uses **Azure Private Link**
- Point-to-point private connection
- No open internet exposure
- Ideal for:
  - Azure VMs
  - Web Apps
  - Internal services

### üîπ Virtual Network (VNet) Access
- Restrict access to specific Azure Virtual Networks
- Prevents exposure to public internet
- Allows controlled internal traffic

### üîπ Firewall Rules
- Allow specific IP addresses or IP ranges
- Used when public access is required
- ‚ÄúAllow Azure services‚Äù checkbox enables Azure resources to connect

---

# 2Ô∏è‚É£ Identity / Account Security

## Authentication Methods

### üîπ SQL Server Authentication
- Username & password managed by SQL Server
- Less secure in enterprise scenarios

### üîπ Microsoft Entra ID (Azure AD) ‚Äì Recommended
- Centralized identity management
- Single Sign-On (SSO)
- Role-Based Access Control (RBAC)
- Can disable SQL authentication
- Requires Entra Admin setup

## Benefits
- Centralized access control
- Better compliance
- Stronger identity governance

---

# 3Ô∏è‚É£ Firewall & Threat Protection (Microsoft Defender)

## Microsoft Defender for Cloud
- Paid service (~$15 per server/month)
- 30-day free trial available
- Advanced threat detection
- Monitors unusual activity
- Detects:
  - Suspicious downloads
  - Data exfiltration attempts
  - Unusual login behavior

## Additional Features
- Just-in-Time (JIT) access
- Security policy enforcement
- Dynamic threat detection

---

# 4Ô∏è‚É£ Encryption

## Default Encryption
- Databases are encrypted by default
- Uses Service-Managed Keys
- Cannot disable at server level
- Can disable at database level (not recommended)

## Customer-Managed Keys (CMK)
- Stored in **Azure Key Vault**
- Full control over encryption keys
- Ability to rotate/regenerate keys
- Microsoft does not store your key

---

# 5Ô∏è‚É£ Logging & Auditing

## Purpose
- Does not prevent attacks
- Helps detect, monitor, and investigate incidents

## Features
- Track database activity
- Identify:
  - Who accessed data
  - What actions were performed
  - When changes occurred
- Set alerts for suspicious behavior

## Storage Options
- Log Analytics (centralized monitoring)
- Audit Microsoft access activities (optional)

---

# üîê Security Summary for DP-900 Exam

Azure SQL Database security includes:

- ‚úÖ Networking Security  
- ‚úÖ Identity & Access Management  
- ‚úÖ Firewall & Threat Protection  
- ‚úÖ Encryption  
- ‚úÖ Logging & Auditing  

Together, these create a multi-layered security model to protect databases from unauthorized access, attacks, and data breaches.

---

# üéØ Interview One-Line Summary

"Azure SQL security follows a layered defense approach using network isolation, identity-based authentication, firewall protection, encryption at rest, and auditing for monitoring and compliance."



